let __splash=document.createElement("splash-screen");Object.assign(__splash.style,{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"var(--background)",zIndex:999}),document.documentElement.appendChild(__splash),document.addEventListener("readystatechange",(e=>{"interactive"===e.target.readyState&&__splash.remove()}));const manifest=Object.assign({accent:"#e91e63",theme:"system",title:"Spectre App",desc:"Powered by SpectreJS",icon:"/favicon.ico",color:"#454545",foreground:"#fbfbfb",background:"#fff",shadow:"#00000020",entry:location.origin,ui:""},...[...document.currentScript.attributes||[]].map((e=>({[e.name]:e.value}))));manifest.src=document.currentScript.src,manifest.icon=new URL(manifest.icon,location.origin).href,"dark"==manifest.theme&&Object.assign(manifest,{color:"#fcfcfc",background:"#151515",foreground:"#252525",shadow:"#000000aa"}),"oled"==manifest.theme&&Object.assign(manifest,{color:"#fcfcfc",background:"#000",foreground:"#151515",shadow:"#ffffff25"}),document.documentElement.lang="en",document.head.querySelector("meta[charset]")||console.warn('Add a charset to your head element, e.g <meta charset="UTF-8">');let header=document.createElement("head");header.innerHTML=`<meta name=viewport content=width=device-width,initial-scale=1><title>${manifest.title}</title><meta name=theme-color content="${manifest.accent}"><link rel=apple-touch-icon href="${manifest.icon}"><link rel=icon type=image/png href="${manifest.icon}"><link rel=manifest href="data:application/manifest+json,${encodeURIComponent(JSON.stringify({name:manifest.title,short_name:manifest.title,start_url:manifest.entry,display:"standalone",background_color:manifest.background,theme_color:manifest.accent,description:manifest.desc,icons:[{src:manifest.icon,sizes:"192x192",type:"image/png"},{src:manifest.icon,sizes:"512x512",type:"image/png",purpose:"any maskable"}]}))}"><style current-theme>html{--accent:${manifest.accent};--color:${manifest.color};--background:${manifest.background};--foreground:${manifest.foreground};--shadow:${manifest.shadow};background:var(--background);color:var(--color)}</style>${"system"==manifest.theme?"<style dark-mode>@media (prefers-color-scheme: dark) {html{--background:#151515;--foreground:#252525;--color:#fcfcfc;--shadow:#000000aa}}</style>":""}${["core",...manifest.ui.split(" ")].filter((e=>e)).map((e=>`<link rel=stylesheet href="${new URL("/ui/"+e+".css",manifest.src).href}">`)).join("")}`,[...header.children].forEach((e=>document.head.appendChild(e))),navigator.serviceWorker&&manifest.worker?navigator.serviceWorker.register(manifest.worker).catch(console.error):console.warn('Add a service worker by setting its path to the "worker" attribute on the spectrejs script tag. You can get one at https://spectrejs.github.io/sw.js');const parser=[];parser.extend=function(e){return this.push(e),this},new MutationObserver((e=>{e.forEach((e=>[...e.addedNodes].filter((e=>"#text"!==e.nodeName)).filter((e=>"#comment"!==e.nodeName)).map((function e(t){if(t.getAttribute("_parsed"))return t;t.setAttribute("_parsed",".");let n=Object.assign({},...[...t.attributes||[]].map((e=>({[e.name]:e.value}))));for(const e in n)if("src"==e||"href"==e||e.endsWith(".url")||e.startsWith("open")){let i=t.closest("[url-scope]")?t.closest("[url-scope]").getAttribute("url-scope"):location.href;n[e]=new URL(n[e],i).href,t.setAttribute(e,n[e])}return parser.forEach((e=>e(t,n))),[...t.children||[]].filter((e=>"#text"!==e.nodeName)).filter((e=>"#comment"!==e.nodeName)).map(e),t})))),document.querySelectorAll("[_parsed]").forEach((e=>e.removeAttribute("_parsed")))})).observe(document.documentElement,{childList:!0,subtree:!0});const bind=new Proxy({},{set(e,t,n,i){const o=e=>(Object.keys(e).map((t=>"object"==typeof e[t]&&null!==e[t]?e[t]=o(e[t]):"")),new Proxy(e,{set:(e,n,i,r)=>(i="object"==typeof i&&null!==i?o(i):i,Reflect.set(e,n,i,r),__refresh(t),!0)}));return n="object"==typeof n&&null!==n?o(n):n,Reflect.set(e,t,n,i),__refresh(t),!0}}),__refresh=function(e){[...document.querySelectorAll(`[bind="${e}"],[bind\\.local="${e}"],[bind\\.session="${e}"]`)].forEach((t=>{let n=bind[e];try{n=JSON.stringify(n)}catch(t){}if(t.getAttribute("_cache")===n)return!0;if(t.setAttribute("_cache",n),t.innerHTML=__raw_bind(bind[e],t.getAttribute("template"),t.getAttribute("bind.join"),t.getAttribute("bind.preview")),t.getAttribute("bind.local")?localStorage[e]=JSON.stringify(bind[e]):t.getAttribute("bind.session")&&(sessionStorage[e]=JSON.stringify(bind[e])),t.getAttribute("onbind")&&void 0!==bind[e]){let n=t.getAttribute("onbind").trim();n in window?window[n].apply(t,[x]):Function(`return async function(event){${n}}`)().apply(t,[bind[e]])}}))};parser.extend((function(e,t){if("bind"in t||"bind.local"in t||"bind.session"in t){let n=t["bind.default"],i=t["bind.local"]||t["bind.session"]||t.bind;"template"in t||(e.setAttribute("template",e.innerHTML),e.innerHTML=""),"bind.local"in t&&t["bind.local"]in localStorage&&(n=localStorage[t["bind.local"]]),"bind.session"in t&&t["bind.session"]in sessionStorage&&(n=sessionStorage[t["bind.session"]]),"bind.cookie"in t&&t["bind.cookie"]in cookies&&(n=cookies[t["bind.local"]]);try{n=JSON.parse(n)}catch(e){}void 0!==bind[i]?__refresh(i):void 0!==n&&(bind[i]=n),"bind.url"in t&&fetch(new URL(t["bind.url"],e.closest("[url-scope]")?e.closest("[url-scope]").getAttribute("url-scope"):location.href)).then((e=>e.text())).then((e=>{try{e=JSON.parse(e)}catch(e){}bind[i]=e})).catch((e=>{}))}}));const __raw_bind=(e,t="",n="",i="")=>void 0===e?"":("object"==typeof e&&null!==e&&e instanceof Array||(e=[e]),"first"==i&&(e=[e[0]]),"last"==i&&(e=[e.pop()]),"random"==i&&(e=[e[Math.floor(Math.random()*e.length)]]),"number"==typeof(i-0)&&e[i-0],e.map((e=>String(t).replaceAll("{*}",String(e)).replace(/{.*?}/g,(function(t){let n=t.replace(/[{}]/g,"").trim();try{n=Function(`return arguments[0].${n}`)(e)}catch(e){n=void 0}return void 0===n?t:n})))).join(""));parser.extend((function(e,t){for(const n in t){let i=t[n].trim();n.startsWith("#")&&(e.id=n.replace("#",""),e.removeAttribute(n)),n.startsWith(".")&&(e.classList.add(...n.split(".").filter((e=>e))),e.removeAttribute(n)),n.startsWith("--")&&(e.style.setProperty(n,i),e.removeAttribute(n)),n.startsWith("-")&&(e.style[n.replace("-","")]=i.startsWith("--")?`var(${i})`:i,e.removeAttribute(n)),n.startsWith(":")&&("type"in e?e.type=n.replace(":",""):e.setAttribute("type",n.replace(":","")),e.removeAttribute(n))}})),parser.extend((function(e,t){for(const n in t){let i=t[n].trim();if(n.startsWith("on")){let[t,o]=n.split(".");e[t]=n=>{"prevent"==o&&n.preventDefault(),i in window?window[i].apply(e,[n]):Function(`return async function(event){${i}}`)().apply(e,[n]),"once"==o&&(e[t]=e=>{})},"onenter"==t&&(e.onkeyup=n=>{"prevent"==o&&n.preventDefault(),13==n.keyCode&&(n.value=e.value,i in window?window[i].apply(e,[n]):Function(`return async function(event){${i}}`)().apply(e,[n]),"once"==o&&(e[t]=e=>{}))}),"onitemclick"==t&&(e.onclick=t=>{t.composedPath()[0]!==e&&(t.root=t.composedPath()[t.composedPath().indexOf(e)-1],t.root&&(t.bound=e.getAttribute("bind.local")||e.getAttribute("bind.session")||e.getAttribute("bind"),t.index=[...e.children].indexOf(t.root),t.bound&&void 0!==bind[t.bound]&&"object"==typeof bind[t.bound]&&null!==bind[t.bound]&&bind[t.bound]instanceof Array&&(t.bind=bind[t.bound][t.index])),i in window?window[i].apply(e,[t]):Function(`return async function(event){${i}}`)().apply(e,[t]))})}}})),parser.extend((function(e,t){if("ICON"==e.tagName&&0===e.children.length){let t=e.innerText.trim().replaceAll(" ","-");e.innerHTML='<svg fill=currentColor .loading width=16 height=16 viewBox="0 0 24.00 24.00"><path d="M12 4V2C6.5 2 2 6.5 2 12h2c0-4.4 3.6-8 8-8z"/></svg>',sessionStorage["icon-"+t]?e.innerHTML=sessionStorage["icon-"+t]:fetch(new URL("/ui/icons/"+t+".svg",manifest.src).href).then((e=>e.text())).then((n=>{e.innerHTML=n,sessionStorage["icon-"+t]=n})).catch((t=>e.innerHTML='<svg width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16"><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/></svg>'))}"LOAD"==e.tagName&&(e.innerHTML='<svg fill=currentColor .loading width=16 height=16 viewBox="0 0 24.00 24.00"><path d="M12 4V2C6.5 2 2 6.5 2 12h2c0-4.4 3.6-8 8-8z"/></svg>')})),parser.extend((function(e,t){"back"in t&&(e.onclick=e=>history.back()),"IMG"!=e.tagName&&"IFRAME"!=e.tagName||(e.loading="lazy"),"IMG"==e.tagName&&(e.alt=e.alt||String(String(String(e.src).split("/").pop()).split(".")[0]).replaceAll("-"," ")),"open"in t&&(e.onclick=e=>open(t.open)),"open.nav"in t&&(e.onclick=e=>window.open(t["open.nav"])),"open.frame"in t&&(e.onclick=e=>open(t["open.frame"],"frame")),"open.solid"in t&&(e.onclick=e=>open(t["open.solid"],"solid"))}));const modal=function(e,t=location.href){let n=document.createElement("modal");return n.setAttribute("style","position:fixed;z-index:3;top:0;left:0;width:100%;height:100%;background:var(--shadow);overflow: auto;display:flex;flex-direction:column;align-items:flex-start;align-content:flex-start;justify-content:flex-start;flex:none"),n.setAttribute("url-scope",t),n.setAttribute("onclick","if(event.composedPath()[0]===this)history.back()"),n.innerHTML=e||"",[...n.querySelectorAll("script")].forEach((e=>e.remove())),document.documentElement.appendChild(n),history.pushState(btoa(Math.random()),null,location.href),n},open=async function(e,t=""){e=new URL(e,location.href).href;let n=modal("<load -margin=auto >",e);if(t.includes("solid")&&(n.style.background="var(--background)"),t.includes("frame"))n.innerHTML=`<iframe src="${e}" -width=100% -height=100% -border=0 >`;else if(sessionStorage[e])n.innerHTML=sessionStorage[e];else{let t=await fetch(e).catch((e=>null));t=null!==t&&t.ok?await t.text().catch((e=>"Failed to load")):"Failed to load","Failed to load"!==t&&(sessionStorage[e]=t),n.innerHTML=t}return n};window.onpopstate=e=>{window.onBack&&onBack(history.state);let t=[...document.querySelectorAll("modal")].pop();t&&t.remove()};